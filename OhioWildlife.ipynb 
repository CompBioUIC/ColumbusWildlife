{
 "cells": [
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Installation Requirements and Module Configuration"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "If you would like to run in your own environment, the following dependencies are required"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 1,
   "metadata": {},
   "outputs": [],
   "source": [
    "## Dependencies\n",
    "# !pip install azure-storage-blob"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 28,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The autoreload extension is already loaded. To reload it, use:\n",
      "  %reload_ext autoreload\n"
     ]
    }
   ],
   "source": [
    "#to reflect changes made in modules\n",
    "%load_ext autoreload\n",
    "%autoreload 2"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 246,
   "metadata": {},
   "outputs": [],
   "source": [
    "##imports\n",
    "import pandas as pd\n",
    "import os, sys\n",
    "import json\n",
    "sys.path.append(os.path.join(sys.path[0], '../'))\n",
    "\n",
    "from columbus_wildlife_workshop import Flickr\n",
    "fr = Flickr() \n",
    "\n",
    "from image_data import Save\n",
    "s = Save()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Query Terms"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Feel free to play around and modify the query term to see how your results differ :)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 115,
   "metadata": {},
   "outputs": [],
   "source": [
    "term = 'Columbus AND Ohio AND wildlife AND NOT zoo AND NOT domestic'"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Flickr API"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Connect to Flickr photos search api \n",
    "API will retrieve results for term selected and download them to a zip file specified"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 116,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Hello!!\n",
      "<Response [200]>\n",
      "12 Found with Columbus+AND+Ohio+AND+wildlife+AND+NOT+zoo+AND+NOT+domestic\n",
      "Done Retrieving Flickr Results\n"
     ]
    }
   ],
   "source": [
    "json_res = fr.search(term, saveTo=True)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Download Images to A Folder\n",
    "In the same directory this notebook is in, create a folder \"images\".\n",
    "This folder will contain all jpg images from the Flickr API query"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Save images to a folder specied. As we save images, we build a list of dictionaries representing the images.\n",
    "\n",
    "For each image, we construct a dictionary with:\n",
    "   - url: img url from flickr\n",
    "   - name: name of image\n",
    "   - data: bytearray representation of img "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 149,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "https://live.staticflickr.com/65535/50567923271_926d37d247_b.jpg\n"
     ]
    }
   ],
   "source": [
    "# Test out with a small portion of images\n",
    "subset = json_res[0][0:6]\n",
    "print(subset[0]['url_l'])"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 150,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "done downloading images!\n"
     ]
    }
   ],
   "source": [
    "# For Species Classfier Images \n",
    "file_path = 'subset_classifier_images/'#\"classifier_images/\"\n",
    "list_images = s.download_images(file_path, subset)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Species Classfication"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Connect to Microsoft Azure SpeciesClassification API to generate predictions on species in frame using the photos collected from the Flickr API"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Note: To run the following code, you'll need to request an API key for the Species Classification API\n",
    "For more info on doing so, visit\n",
    "https://docs.microsoft.com/en-us/azure/architecture/solution-ideas/articles/ai-for-earth "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 192,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "<class 'list'>\n"
     ]
    }
   ],
   "source": [
    "# get list of image dicts\n",
    "# FIXME: try and save this img_data to a json file so we dont\n",
    "# have to reload each time\n",
    "image_data = list_images\n",
    "print(type(image_data))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 177,
   "metadata": {},
   "outputs": [],
   "source": [
    "img = img_data[0]['url']"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 183,
   "metadata": {},
   "outputs": [],
   "source": [
    "from columbus_wildlife_workshop import SpeciesClassifier"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 193,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Running API...\n",
      "...done\n"
     ]
    },
    {
     "data": {
      "text/html": [
       "<style>div.output_subarea{overflow-x:hidden !important}.container{margin:0 auto}.single_image{width:50%} </style><div class='container'><div class='image_container'><img class='single_image' src='https://live.staticflickr.com/65535/50567923271_926d37d247_b.jpg'/></div></div>"
      ],
      "text/plain": [
       "<IPython.core.display.HTML object>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "result:  ({'predictions': [{'class': 'Aves', 'class_common': 'Birds', 'confidence': 48.289334774017334, 'family': 'Alcedinidae', 'family_common': 'Kingfishers', 'genus': 'Megaceryle', 'genus_common': '', 'kingdom': 'Animalia', 'kingdom_common': 'Animals', 'order': 'Coraciiformes', 'order_common': 'Kingfishers and Allies', 'phylum': 'Chordata', 'phylum_common': 'Chordates', 'species': 'Megaceryle alcyon', 'species_common': 'Belted Kingfisher', 'subphylum': 'Vertebrata', 'subphylum_common': 'Vertebrates'}, {'class': 'Aves', 'class_common': 'Birds', 'confidence': 23.83272796869278, 'family': 'Alcedinidae', 'family_common': 'Kingfishers', 'genus': 'Chloroceryle', 'genus_common': 'American Green Kingfishers', 'kingdom': 'Animalia', 'kingdom_common': 'Animals', 'order': 'Coraciiformes', 'order_common': 'Kingfishers and Allies', 'phylum': 'Chordata', 'phylum_common': 'Chordates', 'species': 'Chloroceryle amazona', 'species_common': 'Amazon Kingfisher', 'subphylum': 'Vertebrata', 'subphylum_common': 'Vertebrates'}, {'class': 'Aves', 'class_common': 'Birds', 'confidence': 15.387740731239319, 'family': 'Alcedinidae', 'family_common': 'Kingfishers', 'genus': 'Megaceryle', 'genus_common': '', 'kingdom': 'Animalia', 'kingdom_common': 'Animals', 'order': 'Coraciiformes', 'order_common': 'Kingfishers and Allies', 'phylum': 'Chordata', 'phylum_common': 'Chordates', 'species': 'Megaceryle torquata', 'species_common': 'Ringed Kingfisher', 'subphylum': 'Vertebrata', 'subphylum_common': 'Vertebrates'}, {'class': 'Aves', 'class_common': 'Birds', 'confidence': 1.7697395756840706, 'family': 'Alcedinidae', 'family_common': 'Kingfishers', 'genus': 'Chloroceryle', 'genus_common': 'American Green Kingfishers', 'kingdom': 'Animalia', 'kingdom_common': 'Animals', 'order': 'Coraciiformes', 'order_common': 'Kingfishers and Allies', 'phylum': 'Chordata', 'phylum_common': 'Chordates', 'species': 'Chloroceryle aenea', 'species_common': 'American Pygmy Kingfisher', 'subphylum': 'Vertebrata', 'subphylum_common': 'Vertebrates'}, {'class': 'Aves', 'class_common': 'Birds', 'confidence': 1.2283433228731155, 'family': 'Alcedinidae', 'family_common': 'Kingfishers', 'genus': 'Chloroceryle', 'genus_common': 'American Green Kingfishers', 'kingdom': 'Animalia', 'kingdom_common': 'Animals', 'order': 'Coraciiformes', 'order_common': 'Kingfishers and Allies', 'phylum': 'Chordata', 'phylum_common': 'Chordates', 'species': 'Chloroceryle americana', 'species_common': 'Green Kingfisher', 'subphylum': 'Vertebrata', 'subphylum_common': 'Vertebrates'}]}, False)\n"
     ]
    },
    {
     "data": {
      "text/html": [
       "<style>.progress-container {margin:0 auto; min-height: 25px;margin:0;width:100%; margin-top:10px}.progress-bar{background-color:#ffc107; padding:3px}.progress-text{color:black; margin-top:5px;} .species .species-common { color:black !important; font-family:'Helvetica Neue',Helvetica,Arial,sans-serif; font-size:14px;line-height:20px;}</style><a style='color:black;' class='species' href='https://bing.com/images/search?q=Megaceryle alcyon' target='_blank'>Megaceryle alcyon</a><span class='species-common'>  ( Belted Kingfisher ) </span><div class='progress progress-container'><div class='progress-bar' style='width:48.29%' ><span class='progress-text'>48.29%</span></div></div>"
      ],
      "text/plain": [
       "<IPython.core.display.HTML object>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "data": {
      "text/html": [
       "<a style='color:black;' class='species' href='https://bing.com/images/search?q=Chloroceryle amazona' target='_blank'>Chloroceryle amazona</a><span class='species-common'>  ( Amazon Kingfisher ) </span><div class='progress progress-container'><div class='progress-bar' style='width:23.83%' ><span class='progress-text'>23.83%</span></div></div>"
      ],
      "text/plain": [
       "<IPython.core.display.HTML object>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "data": {
      "text/html": [
       "<a style='color:black;' class='species' href='https://bing.com/images/search?q=Megaceryle torquata' target='_blank'>Megaceryle torquata</a><span class='species-common'>  ( Ringed Kingfisher ) </span><div class='progress progress-container'><div class='progress-bar' style='width:15.39%' ><span class='progress-text'>15.39%</span></div></div>"
      ],
      "text/plain": [
       "<IPython.core.display.HTML object>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "data": {
      "text/html": [
       "<a style='color:black;' class='species' href='https://bing.com/images/search?q=Chloroceryle aenea' target='_blank'>Chloroceryle aenea</a><span class='species-common'>  ( American Pygmy Kingfisher ) </span><div class='progress progress-container'><div class='progress-bar' style='width:1.77%' ><span class='progress-text'>1.77%</span></div></div>"
      ],
      "text/plain": [
       "<IPython.core.display.HTML object>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "data": {
      "text/html": [
       "<a style='color:black;' class='species' href='https://bing.com/images/search?q=Chloroceryle americana' target='_blank'>Chloroceryle americana</a><span class='species-common'>  ( Green Kingfisher ) </span><div class='progress progress-container'><div class='progress-bar' style='width:1.23%' ><span class='progress-text'>1.23%</span></div></div>"
      ],
      "text/plain": [
       "<IPython.core.display.HTML object>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Running API...\n",
      "...done\n"
     ]
    },
    {
     "data": {
      "text/html": [
       "<style>div.output_subarea{overflow-x:hidden !important}.container{margin:0 auto}.single_image{width:50%} </style><div class='container'><div class='image_container'><img class='single_image' src='https://live.staticflickr.com/65535/50561598837_04ed2168d8_b.jpg'/></div></div>"
      ],
      "text/plain": [
       "<IPython.core.display.HTML object>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "result:  ({'predictions': [{'class': 'Mammalia', 'class_common': 'Mammals', 'confidence': 11.987053602933884, 'family': 'Cervidae', 'family_common': 'Deer', 'genus': 'Odocoileus', 'genus_common': 'White tailed and Mule Deer', 'kingdom': 'Animalia', 'kingdom_common': 'Animals', 'order': 'Artiodactyla', 'order_common': 'Even toed Ungulates', 'phylum': 'Chordata', 'phylum_common': 'Chordates', 'species': 'Odocoileus virginianus', 'species_common': 'White tailed Deer', 'suborder': 'Ruminantia', 'suborder_common': 'Ruminants', 'subphylum': 'Vertebrata', 'subphylum_common': 'Vertebrates'}, {'class': 'Mammalia', 'class_common': 'Mammals', 'confidence': 10.599566996097565, 'family': 'Cervidae', 'family_common': 'Deer', 'genus': 'Odocoileus', 'genus_common': 'White tailed and Mule Deer', 'kingdom': 'Animalia', 'kingdom_common': 'Animals', 'order': 'Artiodactyla', 'order_common': 'Even toed Ungulates', 'phylum': 'Chordata', 'phylum_common': 'Chordates', 'species': 'Odocoileus virginianus clavium', 'species_common': 'Key Deer', 'suborder': 'Ruminantia', 'suborder_common': 'Ruminants', 'subphylum': 'Vertebrata', 'subphylum_common': 'Vertebrates'}, {'class': 'Mammalia', 'class_common': 'Mammals', 'confidence': 9.096885472536087, 'family': 'Cervidae', 'family_common': 'Deer', 'genus': 'Odocoileus', 'genus_common': 'White tailed and Mule Deer', 'kingdom': 'Animalia', 'kingdom_common': 'Animals', 'order': 'Artiodactyla', 'order_common': 'Even toed Ungulates', 'phylum': 'Chordata', 'phylum_common': 'Chordates', 'species': 'Odocoileus hemionus columbianus', 'species_common': 'Columbian Black tailed Deer', 'suborder': 'Ruminantia', 'suborder_common': 'Ruminants', 'subphylum': 'Vertebrata', 'subphylum_common': 'Vertebrates'}, {'class': 'Mammalia', 'class_common': 'Mammals', 'confidence': 8.383452147245407, 'family': 'Cervidae', 'family_common': 'Deer', 'genus': 'Cervus', 'genus_common': '', 'kingdom': 'Animalia', 'kingdom_common': 'Animals', 'order': 'Artiodactyla', 'order_common': 'Even toed Ungulates', 'phylum': 'Chordata', 'phylum_common': 'Chordates', 'species': 'Cervus elaphus', 'species_common': 'Red Deer', 'suborder': 'Ruminantia', 'suborder_common': 'Ruminants', 'subphylum': 'Vertebrata', 'subphylum_common': 'Vertebrates'}, {'class': 'Mammalia', 'class_common': 'Mammals', 'confidence': 5.6644342839717865, 'family': 'Cervidae', 'family_common': 'Deer', 'genus': 'Odocoileus', 'genus_common': 'White tailed and Mule Deer', 'kingdom': 'Animalia', 'kingdom_common': 'Animals', 'order': 'Artiodactyla', 'order_common': 'Even toed Ungulates', 'phylum': 'Chordata', 'phylum_common': 'Chordates', 'species': 'Odocoileus hemionus', 'species_common': 'Mule Deer', 'suborder': 'Ruminantia', 'suborder_common': 'Ruminants', 'subphylum': 'Vertebrata', 'subphylum_common': 'Vertebrates'}]}, False)\n"
     ]
    },
    {
     "data": {
      "text/html": [
       "<style>.progress-container {margin:0 auto; min-height: 25px;margin:0;width:100%; margin-top:10px}.progress-bar{background-color:#ffc107; padding:3px}.progress-text{color:black; margin-top:5px;} .species .species-common { color:black !important; font-family:'Helvetica Neue',Helvetica,Arial,sans-serif; font-size:14px;line-height:20px;}</style><a style='color:black;' class='species' href='https://bing.com/images/search?q=Odocoileus virginianus' target='_blank'>Odocoileus virginianus</a><span class='species-common'>  ( White tailed Deer ) </span><div class='progress progress-container'><div class='progress-bar' style='width:11.99%' ><span class='progress-text'>11.99%</span></div></div>"
      ],
      "text/plain": [
       "<IPython.core.display.HTML object>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "data": {
      "text/html": [
       "<a style='color:black;' class='species' href='https://bing.com/images/search?q=Odocoileus virginianus clavium' target='_blank'>Odocoileus virginianus clavium</a><span class='species-common'>  ( Key Deer ) </span><div class='progress progress-container'><div class='progress-bar' style='width:10.6%' ><span class='progress-text'>10.6%</span></div></div>"
      ],
      "text/plain": [
       "<IPython.core.display.HTML object>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "data": {
      "text/html": [
       "<a style='color:black;' class='species' href='https://bing.com/images/search?q=Odocoileus hemionus columbianus' target='_blank'>Odocoileus hemionus columbianus</a><span class='species-common'>  ( Columbian Black tailed Deer ) </span><div class='progress progress-container'><div class='progress-bar' style='width:9.1%' ><span class='progress-text'>9.1%</span></div></div>"
      ],
      "text/plain": [
       "<IPython.core.display.HTML object>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "data": {
      "text/html": [
       "<a style='color:black;' class='species' href='https://bing.com/images/search?q=Cervus elaphus' target='_blank'>Cervus elaphus</a><span class='species-common'>  ( Red Deer ) </span><div class='progress progress-container'><div class='progress-bar' style='width:8.38%' ><span class='progress-text'>8.38%</span></div></div>"
      ],
      "text/plain": [
       "<IPython.core.display.HTML object>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "data": {
      "text/html": [
       "<a style='color:black;' class='species' href='https://bing.com/images/search?q=Odocoileus hemionus' target='_blank'>Odocoileus hemionus</a><span class='species-common'>  ( Mule Deer ) </span><div class='progress progress-container'><div class='progress-bar' style='width:5.66%' ><span class='progress-text'>5.66%</span></div></div>"
      ],
      "text/plain": [
       "<IPython.core.display.HTML object>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Running API...\n",
      "...done\n"
     ]
    },
    {
     "data": {
      "text/html": [
       "<style>div.output_subarea{overflow-x:hidden !important}.container{margin:0 auto}.single_image{width:50%} </style><div class='container'><div class='image_container'><img class='single_image' src='https://live.staticflickr.com/65535/50561597437_b02dc4f1e4_b.jpg'/></div></div>"
      ],
      "text/plain": [
       "<IPython.core.display.HTML object>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "result:  ({'predictions': [{'class': 'Mammalia', 'class_common': 'Mammals', 'confidence': 13.054774701595306, 'family': 'Cervidae', 'family_common': 'Deer', 'genus': 'Odocoileus', 'genus_common': 'White tailed and Mule Deer', 'kingdom': 'Animalia', 'kingdom_common': 'Animals', 'order': 'Artiodactyla', 'order_common': 'Even toed Ungulates', 'phylum': 'Chordata', 'phylum_common': 'Chordates', 'species': 'Odocoileus hemionus columbianus', 'species_common': 'Columbian Black tailed Deer', 'suborder': 'Ruminantia', 'suborder_common': 'Ruminants', 'subphylum': 'Vertebrata', 'subphylum_common': 'Vertebrates'}, {'class': 'Mammalia', 'class_common': 'Mammals', 'confidence': 12.56299614906311, 'family': 'Cervidae', 'family_common': 'Deer', 'genus': 'Odocoileus', 'genus_common': 'White tailed and Mule Deer', 'kingdom': 'Animalia', 'kingdom_common': 'Animals', 'order': 'Artiodactyla', 'order_common': 'Even toed Ungulates', 'phylum': 'Chordata', 'phylum_common': 'Chordates', 'species': 'Odocoileus hemionus', 'species_common': 'Mule Deer', 'suborder': 'Ruminantia', 'suborder_common': 'Ruminants', 'subphylum': 'Vertebrata', 'subphylum_common': 'Vertebrates'}, {'class': 'Mammalia', 'class_common': 'Mammals', 'confidence': 5.561569333076477, 'family': 'Cervidae', 'family_common': 'Deer', 'genus': 'Odocoileus', 'genus_common': 'White tailed and Mule Deer', 'kingdom': 'Animalia', 'kingdom_common': 'Animals', 'order': 'Artiodactyla', 'order_common': 'Even toed Ungulates', 'phylum': 'Chordata', 'phylum_common': 'Chordates', 'species': 'Odocoileus hemionus californicus', 'species_common': 'California Mule Deer', 'suborder': 'Ruminantia', 'suborder_common': 'Ruminants', 'subphylum': 'Vertebrata', 'subphylum_common': 'Vertebrates'}, {'class': 'Mammalia', 'class_common': 'Mammals', 'confidence': 5.3228892385959625, 'family': 'Cervidae', 'family_common': 'Deer', 'genus': 'Odocoileus', 'genus_common': 'White tailed and Mule Deer', 'kingdom': 'Animalia', 'kingdom_common': 'Animals', 'order': 'Artiodactyla', 'order_common': 'Even toed Ungulates', 'phylum': 'Chordata', 'phylum_common': 'Chordates', 'species': 'Odocoileus hemionus hemionus', 'species_common': 'Rocky Mountain Mule Deer', 'suborder': 'Ruminantia', 'suborder_common': 'Ruminants', 'subphylum': 'Vertebrata', 'subphylum_common': 'Vertebrates'}, {'class': 'Mammalia', 'class_common': 'Mammals', 'confidence': 4.59739975631237, 'family': 'Suidae', 'family_common': 'Swines', 'genus': 'Sus', 'genus_common': '', 'kingdom': 'Animalia', 'kingdom_common': 'Animals', 'order': 'Artiodactyla', 'order_common': 'Even toed Ungulates', 'phylum': 'Chordata', 'phylum_common': 'Chordates', 'species': 'Sus scrofa', 'species_common': 'Wild Boar', 'subphylum': 'Vertebrata', 'subphylum_common': 'Vertebrates'}]}, False)\n"
     ]
    },
    {
     "data": {
      "text/html": [
       "<style>.progress-container {margin:0 auto; min-height: 25px;margin:0;width:100%; margin-top:10px}.progress-bar{background-color:#ffc107; padding:3px}.progress-text{color:black; margin-top:5px;} .species .species-common { color:black !important; font-family:'Helvetica Neue',Helvetica,Arial,sans-serif; font-size:14px;line-height:20px;}</style><a style='color:black;' class='species' href='https://bing.com/images/search?q=Odocoileus hemionus columbianus' target='_blank'>Odocoileus hemionus columbianus</a><span class='species-common'>  ( Columbian Black tailed Deer ) </span><div class='progress progress-container'><div class='progress-bar' style='width:13.05%' ><span class='progress-text'>13.05%</span></div></div>"
      ],
      "text/plain": [
       "<IPython.core.display.HTML object>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "data": {
      "text/html": [
       "<a style='color:black;' class='species' href='https://bing.com/images/search?q=Odocoileus hemionus' target='_blank'>Odocoileus hemionus</a><span class='species-common'>  ( Mule Deer ) </span><div class='progress progress-container'><div class='progress-bar' style='width:12.56%' ><span class='progress-text'>12.56%</span></div></div>"
      ],
      "text/plain": [
       "<IPython.core.display.HTML object>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "data": {
      "text/html": [
       "<a style='color:black;' class='species' href='https://bing.com/images/search?q=Odocoileus hemionus californicus' target='_blank'>Odocoileus hemionus californicus</a><span class='species-common'>  ( California Mule Deer ) </span><div class='progress progress-container'><div class='progress-bar' style='width:5.56%' ><span class='progress-text'>5.56%</span></div></div>"
      ],
      "text/plain": [
       "<IPython.core.display.HTML object>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "data": {
      "text/html": [
       "<a style='color:black;' class='species' href='https://bing.com/images/search?q=Odocoileus hemionus hemionus' target='_blank'>Odocoileus hemionus hemionus</a><span class='species-common'>  ( Rocky Mountain Mule Deer ) </span><div class='progress progress-container'><div class='progress-bar' style='width:5.32%' ><span class='progress-text'>5.32%</span></div></div>"
      ],
      "text/plain": [
       "<IPython.core.display.HTML object>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "data": {
      "text/html": [
       "<a style='color:black;' class='species' href='https://bing.com/images/search?q=Sus scrofa' target='_blank'>Sus scrofa</a><span class='species-common'>  ( Wild Boar ) </span><div class='progress progress-container'><div class='progress-bar' style='width:4.6%' ><span class='progress-text'>4.6%</span></div></div>"
      ],
      "text/plain": [
       "<IPython.core.display.HTML object>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Running API...\n",
      "...done\n"
     ]
    },
    {
     "data": {
      "text/html": [
       "<style>div.output_subarea{overflow-x:hidden !important}.container{margin:0 auto}.single_image{width:50%} </style><div class='container'><div class='image_container'><img class='single_image' src='https://live.staticflickr.com/65535/50561468316_74b9d94115_b.jpg'/></div></div>"
      ],
      "text/plain": [
       "<IPython.core.display.HTML object>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "result:  ({'predictions': [{'class': 'Mammalia', 'class_common': 'Mammals', 'confidence': 30.397072434425354, 'family': 'Cervidae', 'family_common': 'Deer', 'genus': 'Odocoileus', 'genus_common': 'White tailed and Mule Deer', 'kingdom': 'Animalia', 'kingdom_common': 'Animals', 'order': 'Artiodactyla', 'order_common': 'Even toed Ungulates', 'phylum': 'Chordata', 'phylum_common': 'Chordates', 'species': 'Odocoileus hemionus columbianus', 'species_common': 'Columbian Black tailed Deer', 'suborder': 'Ruminantia', 'suborder_common': 'Ruminants', 'subphylum': 'Vertebrata', 'subphylum_common': 'Vertebrates'}, {'class': 'Mammalia', 'class_common': 'Mammals', 'confidence': 11.539672315120697, 'family': 'Cervidae', 'family_common': 'Deer', 'genus': 'Odocoileus', 'genus_common': 'White tailed and Mule Deer', 'kingdom': 'Animalia', 'kingdom_common': 'Animals', 'order': 'Artiodactyla', 'order_common': 'Even toed Ungulates', 'phylum': 'Chordata', 'phylum_common': 'Chordates', 'species': 'Odocoileus virginianus', 'species_common': 'White tailed Deer', 'suborder': 'Ruminantia', 'suborder_common': 'Ruminants', 'subphylum': 'Vertebrata', 'subphylum_common': 'Vertebrates'}, {'class': 'Mammalia', 'class_common': 'Mammals', 'confidence': 11.176756769418716, 'family': 'Cervidae', 'family_common': 'Deer', 'genus': 'Odocoileus', 'genus_common': 'White tailed and Mule Deer', 'kingdom': 'Animalia', 'kingdom_common': 'Animals', 'order': 'Artiodactyla', 'order_common': 'Even toed Ungulates', 'phylum': 'Chordata', 'phylum_common': 'Chordates', 'species': 'Odocoileus hemionus', 'species_common': 'Mule Deer', 'suborder': 'Ruminantia', 'suborder_common': 'Ruminants', 'subphylum': 'Vertebrata', 'subphylum_common': 'Vertebrates'}, {'class': 'Mammalia', 'class_common': 'Mammals', 'confidence': 11.162222921848297, 'family': 'Cervidae', 'family_common': 'Deer', 'genus': 'Cervus', 'genus_common': '', 'kingdom': 'Animalia', 'kingdom_common': 'Animals', 'order': 'Artiodactyla', 'order_common': 'Even toed Ungulates', 'phylum': 'Chordata', 'phylum_common': 'Chordates', 'species': 'Cervus elaphus', 'species_common': 'Red Deer', 'suborder': 'Ruminantia', 'suborder_common': 'Ruminants', 'subphylum': 'Vertebrata', 'subphylum_common': 'Vertebrates'}, {'confidence': 5.944523215293884, 'species': 'Cervus elaphus roosevelti', 'species_common': 'roosevelt elk'}]}, False)\n"
     ]
    },
    {
     "data": {
      "text/html": [
       "<style>.progress-container {margin:0 auto; min-height: 25px;margin:0;width:100%; margin-top:10px}.progress-bar{background-color:#ffc107; padding:3px}.progress-text{color:black; margin-top:5px;} .species .species-common { color:black !important; font-family:'Helvetica Neue',Helvetica,Arial,sans-serif; font-size:14px;line-height:20px;}</style><a style='color:black;' class='species' href='https://bing.com/images/search?q=Odocoileus hemionus columbianus' target='_blank'>Odocoileus hemionus columbianus</a><span class='species-common'>  ( Columbian Black tailed Deer ) </span><div class='progress progress-container'><div class='progress-bar' style='width:30.4%' ><span class='progress-text'>30.4%</span></div></div>"
      ],
      "text/plain": [
       "<IPython.core.display.HTML object>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "data": {
      "text/html": [
       "<a style='color:black;' class='species' href='https://bing.com/images/search?q=Odocoileus virginianus' target='_blank'>Odocoileus virginianus</a><span class='species-common'>  ( White tailed Deer ) </span><div class='progress progress-container'><div class='progress-bar' style='width:11.54%' ><span class='progress-text'>11.54%</span></div></div>"
      ],
      "text/plain": [
       "<IPython.core.display.HTML object>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "data": {
      "text/html": [
       "<a style='color:black;' class='species' href='https://bing.com/images/search?q=Odocoileus hemionus' target='_blank'>Odocoileus hemionus</a><span class='species-common'>  ( Mule Deer ) </span><div class='progress progress-container'><div class='progress-bar' style='width:11.18%' ><span class='progress-text'>11.18%</span></div></div>"
      ],
      "text/plain": [
       "<IPython.core.display.HTML object>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "data": {
      "text/html": [
       "<a style='color:black;' class='species' href='https://bing.com/images/search?q=Cervus elaphus' target='_blank'>Cervus elaphus</a><span class='species-common'>  ( Red Deer ) </span><div class='progress progress-container'><div class='progress-bar' style='width:11.16%' ><span class='progress-text'>11.16%</span></div></div>"
      ],
      "text/plain": [
       "<IPython.core.display.HTML object>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "data": {
      "text/html": [
       "<a style='color:black;' class='species' href='https://bing.com/images/search?q=Cervus elaphus roosevelti' target='_blank'>Cervus elaphus roosevelti</a><span class='species-common'>  ( roosevelt elk ) </span><div class='progress progress-container'><div class='progress-bar' style='width:5.94%' ><span class='progress-text'>5.94%</span></div></div>"
      ],
      "text/plain": [
       "<IPython.core.display.HTML object>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Running API...\n",
      "...done\n"
     ]
    },
    {
     "data": {
      "text/html": [
       "<style>div.output_subarea{overflow-x:hidden !important}.container{margin:0 auto}.single_image{width:50%} </style><div class='container'><div class='image_container'><img class='single_image' src='https://live.staticflickr.com/65535/50553140586_a04857b1e0_b.jpg'/></div></div>"
      ],
      "text/plain": [
       "<IPython.core.display.HTML object>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "result:  ({'predictions': [{'class': 'Aves', 'class_common': 'Birds', 'confidence': 19.664740562438965, 'family': 'Ardeidae', 'family_common': 'Herons, Egrets, and Bitterns', 'genus': 'Egretta', 'genus_common': '', 'kingdom': 'Animalia', 'kingdom_common': 'Animals', 'order': 'Pelecaniformes', 'order_common': 'Pelicans, Herons, Ibises, and Allies', 'phylum': 'Chordata', 'phylum_common': 'Chordates', 'species': 'Egretta garzetta', 'species_common': 'Little Egret', 'subfamily': 'Ardeinae', 'subfamily_common': '', 'subphylum': 'Vertebrata', 'subphylum_common': 'Vertebrates'}, {'class': 'Aves', 'class_common': 'Birds', 'confidence': 15.311738848686218, 'family': 'Ardeidae', 'family_common': 'Herons, Egrets, and Bitterns', 'genus': 'Ardea', 'genus_common': 'Great Herons', 'kingdom': 'Animalia', 'kingdom_common': 'Animals', 'order': 'Pelecaniformes', 'order_common': 'Pelicans, Herons, Ibises, and Allies', 'phylum': 'Chordata', 'phylum_common': 'Chordates', 'species': 'Ardea herodias', 'species_common': 'Great Blue Heron', 'subfamily': 'Ardeinae', 'subfamily_common': '', 'subphylum': 'Vertebrata', 'subphylum_common': 'Vertebrates'}, {'class': 'Aves', 'class_common': 'Birds', 'confidence': 14.41868245601654, 'family': 'Ardeidae', 'family_common': 'Herons, Egrets, and Bitterns', 'genus': 'Egretta', 'genus_common': '', 'kingdom': 'Animalia', 'kingdom_common': 'Animals', 'order': 'Pelecaniformes', 'order_common': 'Pelicans, Herons, Ibises, and Allies', 'phylum': 'Chordata', 'phylum_common': 'Chordates', 'species': 'Egretta caerulea', 'species_common': 'Little Blue Heron', 'subfamily': 'Ardeinae', 'subfamily_common': '', 'subphylum': 'Vertebrata', 'subphylum_common': 'Vertebrates'}, {'class': 'Aves', 'class_common': 'Birds', 'confidence': 10.413464158773422, 'family': 'Ardeidae', 'family_common': 'Herons, Egrets, and Bitterns', 'genus': 'Egretta', 'genus_common': '', 'kingdom': 'Animalia', 'kingdom_common': 'Animals', 'order': 'Pelecaniformes', 'order_common': 'Pelicans, Herons, Ibises, and Allies', 'phylum': 'Chordata', 'phylum_common': 'Chordates', 'species': 'Egretta thula', 'species_common': 'Snowy Egret', 'subfamily': 'Ardeinae', 'subfamily_common': '', 'subphylum': 'Vertebrata', 'subphylum_common': 'Vertebrates'}, {'class': 'Aves', 'class_common': 'Birds', 'confidence': 8.332090079784393, 'family': 'Ardeidae', 'family_common': 'Herons, Egrets, and Bitterns', 'genus': 'Egretta', 'genus_common': '', 'kingdom': 'Animalia', 'kingdom_common': 'Animals', 'order': 'Pelecaniformes', 'order_common': 'Pelicans, Herons, Ibises, and Allies', 'phylum': 'Chordata', 'phylum_common': 'Chordates', 'species': 'Egretta tricolor', 'species_common': 'Tricolored Heron', 'subfamily': 'Ardeinae', 'subfamily_common': '', 'subphylum': 'Vertebrata', 'subphylum_common': 'Vertebrates'}]}, False)\n"
     ]
    },
    {
     "data": {
      "text/html": [
       "<style>.progress-container {margin:0 auto; min-height: 25px;margin:0;width:100%; margin-top:10px}.progress-bar{background-color:#ffc107; padding:3px}.progress-text{color:black; margin-top:5px;} .species .species-common { color:black !important; font-family:'Helvetica Neue',Helvetica,Arial,sans-serif; font-size:14px;line-height:20px;}</style><a style='color:black;' class='species' href='https://bing.com/images/search?q=Egretta garzetta' target='_blank'>Egretta garzetta</a><span class='species-common'>  ( Little Egret ) </span><div class='progress progress-container'><div class='progress-bar' style='width:19.66%' ><span class='progress-text'>19.66%</span></div></div>"
      ],
      "text/plain": [
       "<IPython.core.display.HTML object>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "data": {
      "text/html": [
       "<a style='color:black;' class='species' href='https://bing.com/images/search?q=Ardea herodias' target='_blank'>Ardea herodias</a><span class='species-common'>  ( Great Blue Heron ) </span><div class='progress progress-container'><div class='progress-bar' style='width:15.31%' ><span class='progress-text'>15.31%</span></div></div>"
      ],
      "text/plain": [
       "<IPython.core.display.HTML object>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "data": {
      "text/html": [
       "<a style='color:black;' class='species' href='https://bing.com/images/search?q=Egretta caerulea' target='_blank'>Egretta caerulea</a><span class='species-common'>  ( Little Blue Heron ) </span><div class='progress progress-container'><div class='progress-bar' style='width:14.42%' ><span class='progress-text'>14.42%</span></div></div>"
      ],
      "text/plain": [
       "<IPython.core.display.HTML object>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "data": {
      "text/html": [
       "<a style='color:black;' class='species' href='https://bing.com/images/search?q=Egretta thula' target='_blank'>Egretta thula</a><span class='species-common'>  ( Snowy Egret ) </span><div class='progress progress-container'><div class='progress-bar' style='width:10.41%' ><span class='progress-text'>10.41%</span></div></div>"
      ],
      "text/plain": [
       "<IPython.core.display.HTML object>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "data": {
      "text/html": [
       "<a style='color:black;' class='species' href='https://bing.com/images/search?q=Egretta tricolor' target='_blank'>Egretta tricolor</a><span class='species-common'>  ( Tricolored Heron ) </span><div class='progress progress-container'><div class='progress-bar' style='width:8.33%' ><span class='progress-text'>8.33%</span></div></div>"
      ],
      "text/plain": [
       "<IPython.core.display.HTML object>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Running API...\n",
      "...done\n"
     ]
    },
    {
     "data": {
      "text/html": [
       "<style>div.output_subarea{overflow-x:hidden !important}.container{margin:0 auto}.single_image{width:50%} </style><div class='container'><div class='image_container'><img class='single_image' src='https://live.staticflickr.com/65535/50543914708_e597b1c4d4_b.jpg'/></div></div>"
      ],
      "text/plain": [
       "<IPython.core.display.HTML object>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "result:  ({'predictions': [{'class': 'Aves', 'class_common': 'Birds', 'confidence': 95.41850090026855, 'family': 'Cardinalidae', 'family_common': 'Cardinals and Allies', 'genus': 'Cardinalis', 'genus_common': 'Typical Cardinals', 'kingdom': 'Animalia', 'kingdom_common': 'Animals', 'order': 'Passeriformes', 'order_common': 'Perching Birds', 'phylum': 'Chordata', 'phylum_common': 'Chordates', 'species': 'Cardinalis cardinalis', 'species_common': 'Northern Cardinal', 'subphylum': 'Vertebrata', 'subphylum_common': 'Vertebrates'}, {'class': 'Aves', 'class_common': 'Birds', 'confidence': 3.2150261104106903, 'family': 'Cardinalidae', 'family_common': 'Cardinals and Allies', 'genus': 'Cardinalis', 'genus_common': 'Typical Cardinals', 'kingdom': 'Animalia', 'kingdom_common': 'Animals', 'order': 'Passeriformes', 'order_common': 'Perching Birds', 'phylum': 'Chordata', 'phylum_common': 'Chordates', 'species': 'Cardinalis sinuatus', 'species_common': 'Pyrrhuloxia', 'subphylum': 'Vertebrata', 'subphylum_common': 'Vertebrates'}, {'class': 'Aves', 'class_common': 'Birds', 'confidence': 0.03369880432728678, 'family': 'Icteridae', 'family_common': 'New World Blackbirds and Orioles', 'genus': 'Icterus', 'genus_common': 'New World Orioles', 'kingdom': 'Animalia', 'kingdom_common': 'Animals', 'order': 'Passeriformes', 'order_common': 'Perching Birds', 'phylum': 'Chordata', 'phylum_common': 'Chordates', 'species': 'Icterus gularis', 'species_common': 'Altamira Oriole', 'subphylum': 'Vertebrata', 'subphylum_common': 'Vertebrates'}, {'class': 'Aves', 'class_common': 'Birds', 'confidence': 0.032280245795845985, 'family': 'Thraupidae', 'family_common': 'Tanagers and Allies', 'genus': 'Paroaria', 'genus_common': 'Red headed Cardinals', 'kingdom': 'Animalia', 'kingdom_common': 'Animals', 'order': 'Passeriformes', 'order_common': 'Perching Birds', 'phylum': 'Chordata', 'phylum_common': 'Chordates', 'species': 'Paroaria coronata', 'species_common': 'Red crested Cardinal', 'subphylum': 'Vertebrata', 'subphylum_common': 'Vertebrates'}, {'class': 'Aves', 'class_common': 'Birds', 'confidence': 0.01819162571337074, 'family': 'Parulidae', 'family_common': 'New World Warblers', 'genus': 'Cardellina', 'genus_common': '', 'kingdom': 'Animalia', 'kingdom_common': 'Animals', 'order': 'Passeriformes', 'order_common': 'Perching Birds', 'phylum': 'Chordata', 'phylum_common': 'Chordates', 'species': 'Cardellina rubra', 'species_common': 'Red Warbler', 'subphylum': 'Vertebrata', 'subphylum_common': 'Vertebrates'}]}, False)\n"
     ]
    },
    {
     "data": {
      "text/html": [
       "<style>.progress-container {margin:0 auto; min-height: 25px;margin:0;width:100%; margin-top:10px}.progress-bar{background-color:#ffc107; padding:3px}.progress-text{color:black; margin-top:5px;} .species .species-common { color:black !important; font-family:'Helvetica Neue',Helvetica,Arial,sans-serif; font-size:14px;line-height:20px;}</style><a style='color:black;' class='species' href='https://bing.com/images/search?q=Cardinalis cardinalis' target='_blank'>Cardinalis cardinalis</a><span class='species-common'>  ( Northern Cardinal ) </span><div class='progress progress-container'><div class='progress-bar' style='width:95.42%' ><span class='progress-text'>95.42%</span></div></div>"
      ],
      "text/plain": [
       "<IPython.core.display.HTML object>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "data": {
      "text/html": [
       "<a style='color:black;' class='species' href='https://bing.com/images/search?q=Cardinalis sinuatus' target='_blank'>Cardinalis sinuatus</a><span class='species-common'>  ( Pyrrhuloxia ) </span><div class='progress progress-container'><div class='progress-bar' style='width:3.22%' ><span class='progress-text'>3.22%</span></div></div>"
      ],
      "text/plain": [
       "<IPython.core.display.HTML object>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "data": {
      "text/html": [
       "<a style='color:black;' class='species' href='https://bing.com/images/search?q=Icterus gularis' target='_blank'>Icterus gularis</a><span class='species-common'>  ( Altamira Oriole ) </span><div class='progress progress-container'><div class='progress-bar' style='width:0.03%' ><span class='progress-text'>0.03%</span></div></div>"
      ],
      "text/plain": [
       "<IPython.core.display.HTML object>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "data": {
      "text/html": [
       "<a style='color:black;' class='species' href='https://bing.com/images/search?q=Paroaria coronata' target='_blank'>Paroaria coronata</a><span class='species-common'>  ( Red crested Cardinal ) </span><div class='progress progress-container'><div class='progress-bar' style='width:0.03%' ><span class='progress-text'>0.03%</span></div></div>"
      ],
      "text/plain": [
       "<IPython.core.display.HTML object>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "data": {
      "text/html": [
       "<a style='color:black;' class='species' href='https://bing.com/images/search?q=Cardellina rubra' target='_blank'>Cardellina rubra</a><span class='species-common'>  ( Red Warbler ) </span><div class='progress progress-container'><div class='progress-bar' style='width:0.02%' ><span class='progress-text'>0.02%</span></div></div>"
      ],
      "text/plain": [
       "<IPython.core.display.HTML object>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "cs = SpeciesClassifier()\n",
    "for image in image_data:\n",
    "    cs.classify_and_display_results(image)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Ground Truths of Species for All Images Collected"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Here, we manually filter our images and assign their true species from what we (the people) see.\n",
    "We then build a dataframe that holds:\n",
    "- img name\n",
    "- species prediction (we store the most confident one, which is the first item in 'predictions' return value\n",
    "- true species"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 282,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Running API...\n",
      "...done\n",
      "Running API...\n",
      "...done\n",
      "Running API...\n",
      "...done\n",
      "Running API...\n",
      "...done\n",
      "Running API...\n",
      "...done\n",
      "Running API...\n",
      "...done\n"
     ]
    }
   ],
   "source": [
    "predictions = []\n",
    "json_predictions = {} \n",
    "image_data_json = {}\n",
    "for image in image_data:\n",
    "    result = cs.get_api_response(image['data'])\n",
    "    pred = {'image': image['name'],\n",
    "            'image_url': image['url'],\n",
    "            'species_prediction': result[0]['predictions'][0]['species_common'],\n",
    "            'true_species': None,\n",
    "            'native_to_ohio': None\n",
    "           }\n",
    "    predictions.append(pred)\n",
    "    \n",
    "    #to use in saving prediction result return by get_api_response() to json file\n",
    "    #each result returned by get_api_response is a tuple so unpack accordingly\n",
    "    json_predictions[image['url']] = result[0]\n",
    "    \n",
    "    #to use in saving each built image document to a json file as well\n",
    "    image_data_json[image['name']] = pred "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 284,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "{'image-1.jpg': {'image': 'image-1.jpg',\n",
       "  'image_url': 'https://live.staticflickr.com/65535/50567923271_926d37d247_b.jpg',\n",
       "  'species_prediction': 'Belted Kingfisher',\n",
       "  'true_species': None,\n",
       "  'native_to_ohio': None},\n",
       " 'image-2.jpg': {'image': 'image-2.jpg',\n",
       "  'image_url': 'https://live.staticflickr.com/65535/50561598837_04ed2168d8_b.jpg',\n",
       "  'species_prediction': 'White tailed Deer',\n",
       "  'true_species': None,\n",
       "  'native_to_ohio': None},\n",
       " 'image-3.jpg': {'image': 'image-3.jpg',\n",
       "  'image_url': 'https://live.staticflickr.com/65535/50561597437_b02dc4f1e4_b.jpg',\n",
       "  'species_prediction': 'Columbian Black tailed Deer',\n",
       "  'true_species': None,\n",
       "  'native_to_ohio': None},\n",
       " 'image-4.jpg': {'image': 'image-4.jpg',\n",
       "  'image_url': 'https://live.staticflickr.com/65535/50561468316_74b9d94115_b.jpg',\n",
       "  'species_prediction': 'Columbian Black tailed Deer',\n",
       "  'true_species': None,\n",
       "  'native_to_ohio': None},\n",
       " 'image-5.jpg': {'image': 'image-5.jpg',\n",
       "  'image_url': 'https://live.staticflickr.com/65535/50553140586_a04857b1e0_b.jpg',\n",
       "  'species_prediction': 'Little Egret',\n",
       "  'true_species': None,\n",
       "  'native_to_ohio': None},\n",
       " 'image-6.jpg': {'image': 'image-6.jpg',\n",
       "  'image_url': 'https://live.staticflickr.com/65535/50543914708_e597b1c4d4_b.jpg',\n",
       "  'species_prediction': 'Northern Cardinal',\n",
       "  'true_species': None,\n",
       "  'native_to_ohio': None}}"
      ]
     },
     "execution_count": 284,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "## sanity checks\n",
    "# json_predictions\n",
    "image_data_json"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 285,
   "metadata": {},
   "outputs": [],
   "source": [
    "#save all json results to json file\n",
    "json_object = json.dumps(json_predictions, indent = 4) \n",
    "  \n",
    "# Writing to sample_flickr_results.json \n",
    "with open(\"sample_flickr_results.json\", \"w\") as outfile: \n",
    "    outfile.write(json_object) "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 286,
   "metadata": {},
   "outputs": [],
   "source": [
    "# save all image_data docs to json file\n",
    "json_object = json.dumps(image_data_json, indent = 4) \n",
    "  \n",
    "# Writing to sample_flickr_results.json \n",
    "with open(\"sample_image_data.json\", \"w\") as outfile: \n",
    "    outfile.write(json_object) "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 287,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>image</th>\n",
       "      <th>image_url</th>\n",
       "      <th>species_prediction</th>\n",
       "      <th>true_species</th>\n",
       "      <th>native_to_ohio</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>image-1.jpg</td>\n",
       "      <td>https://live.staticflickr.com/65535/5056792327...</td>\n",
       "      <td>Belted Kingfisher</td>\n",
       "      <td>None</td>\n",
       "      <td>None</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>image-2.jpg</td>\n",
       "      <td>https://live.staticflickr.com/65535/5056159883...</td>\n",
       "      <td>White tailed Deer</td>\n",
       "      <td>None</td>\n",
       "      <td>None</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>image-3.jpg</td>\n",
       "      <td>https://live.staticflickr.com/65535/5056159743...</td>\n",
       "      <td>Columbian Black tailed Deer</td>\n",
       "      <td>None</td>\n",
       "      <td>None</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>image-4.jpg</td>\n",
       "      <td>https://live.staticflickr.com/65535/5056146831...</td>\n",
       "      <td>Columbian Black tailed Deer</td>\n",
       "      <td>None</td>\n",
       "      <td>None</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>image-5.jpg</td>\n",
       "      <td>https://live.staticflickr.com/65535/5055314058...</td>\n",
       "      <td>Little Egret</td>\n",
       "      <td>None</td>\n",
       "      <td>None</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>5</th>\n",
       "      <td>image-6.jpg</td>\n",
       "      <td>https://live.staticflickr.com/65535/5054391470...</td>\n",
       "      <td>Northern Cardinal</td>\n",
       "      <td>None</td>\n",
       "      <td>None</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "         image                                          image_url  \\\n",
       "0  image-1.jpg  https://live.staticflickr.com/65535/5056792327...   \n",
       "1  image-2.jpg  https://live.staticflickr.com/65535/5056159883...   \n",
       "2  image-3.jpg  https://live.staticflickr.com/65535/5056159743...   \n",
       "3  image-4.jpg  https://live.staticflickr.com/65535/5056146831...   \n",
       "4  image-5.jpg  https://live.staticflickr.com/65535/5055314058...   \n",
       "5  image-6.jpg  https://live.staticflickr.com/65535/5054391470...   \n",
       "\n",
       "            species_prediction true_species native_to_ohio  \n",
       "0            Belted Kingfisher         None           None  \n",
       "1            White tailed Deer         None           None  \n",
       "2  Columbian Black tailed Deer         None           None  \n",
       "3  Columbian Black tailed Deer         None           None  \n",
       "4                 Little Egret         None           None  \n",
       "5            Northern Cardinal         None           None  "
      ]
     },
     "execution_count": 287,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "df = pd.DataFrame(predictions)\n",
    "df"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Manually Filter Images\n",
    "Process: \n",
    "- Go through each image, and to make the process faster, print the species_prediction and double check\n",
    "  with a quick web_search\n",
    "- Insert true_species value to dataframe directly"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 288,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<style>div.output_subarea{overflow-x:hidden !important}.container{margin:0 auto}.single_image{width:50%} </style><div class='container'><div class='image_container'><img class='single_image' src='https://live.staticflickr.com/65535/50567923271_926d37d247_b.jpg'/></div></div>"
      ],
      "text/plain": [
       "<IPython.core.display.HTML object>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Species Predicted In Image:  Belted Kingfisher\n",
      "Is the species prediction correct? (y/n): "
     ]
    },
    {
     "name": "stdin",
     "output_type": "stream",
     "text": [
      " y\n"
     ]
    },
    {
     "data": {
      "text/html": [
       "<style>div.output_subarea{overflow-x:hidden !important}.container{margin:0 auto}.single_image{width:50%} </style><div class='container'><div class='image_container'><img class='single_image' src='https://live.staticflickr.com/65535/50561598837_04ed2168d8_b.jpg'/></div></div>"
      ],
      "text/plain": [
       "<IPython.core.display.HTML object>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Species Predicted In Image:  White tailed Deer\n",
      "Is the species prediction correct? (y/n): "
     ]
    },
    {
     "name": "stdin",
     "output_type": "stream",
     "text": [
      " y\n"
     ]
    },
    {
     "data": {
      "text/html": [
       "<style>div.output_subarea{overflow-x:hidden !important}.container{margin:0 auto}.single_image{width:50%} </style><div class='container'><div class='image_container'><img class='single_image' src='https://live.staticflickr.com/65535/50561597437_b02dc4f1e4_b.jpg'/></div></div>"
      ],
      "text/plain": [
       "<IPython.core.display.HTML object>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Species Predicted In Image:  Columbian Black tailed Deer\n",
      "Is the species prediction correct? (y/n): "
     ]
    },
    {
     "name": "stdin",
     "output_type": "stream",
     "text": [
      " n\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The predicted species is incorrect. Please specify the correct species: \n"
     ]
    },
    {
     "name": "stdin",
     "output_type": "stream",
     "text": [
      " test_for_cf_matrix\n"
     ]
    },
    {
     "data": {
      "text/html": [
       "<style>div.output_subarea{overflow-x:hidden !important}.container{margin:0 auto}.single_image{width:50%} </style><div class='container'><div class='image_container'><img class='single_image' src='https://live.staticflickr.com/65535/50561468316_74b9d94115_b.jpg'/></div></div>"
      ],
      "text/plain": [
       "<IPython.core.display.HTML object>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Species Predicted In Image:  Columbian Black tailed Deer\n",
      "Is the species prediction correct? (y/n): "
     ]
    },
    {
     "name": "stdin",
     "output_type": "stream",
     "text": [
      " y\n"
     ]
    },
    {
     "data": {
      "text/html": [
       "<style>div.output_subarea{overflow-x:hidden !important}.container{margin:0 auto}.single_image{width:50%} </style><div class='container'><div class='image_container'><img class='single_image' src='https://live.staticflickr.com/65535/50553140586_a04857b1e0_b.jpg'/></div></div>"
      ],
      "text/plain": [
       "<IPython.core.display.HTML object>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Species Predicted In Image:  Little Egret\n",
      "Is the species prediction correct? (y/n): "
     ]
    },
    {
     "name": "stdin",
     "output_type": "stream",
     "text": [
      " y\n"
     ]
    },
    {
     "data": {
      "text/html": [
       "<style>div.output_subarea{overflow-x:hidden !important}.container{margin:0 auto}.single_image{width:50%} </style><div class='container'><div class='image_container'><img class='single_image' src='https://live.staticflickr.com/65535/50543914708_e597b1c4d4_b.jpg'/></div></div>"
      ],
      "text/plain": [
       "<IPython.core.display.HTML object>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Species Predicted In Image:  Northern Cardinal\n",
      "Is the species prediction correct? (y/n): "
     ]
    },
    {
     "name": "stdin",
     "output_type": "stream",
     "text": [
      " y\n"
     ]
    }
   ],
   "source": [
    "#iterate through each row in df to get ground truths\n",
    "for index, row in df.iterrows():\n",
    "    true_species = cs.get_ground_truth(row['image_url'], row['species_prediction'])\n",
    "    df.iloc[index]['true_species'] = true_species\n",
    "    \n",
    "    # add in if true_species is in list of wildlife native to ohio"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 289,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>image</th>\n",
       "      <th>image_url</th>\n",
       "      <th>species_prediction</th>\n",
       "      <th>true_species</th>\n",
       "      <th>native_to_ohio</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>image-1.jpg</td>\n",
       "      <td>https://live.staticflickr.com/65535/5056792327...</td>\n",
       "      <td>Belted Kingfisher</td>\n",
       "      <td>Belted Kingfisher</td>\n",
       "      <td>None</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>image-2.jpg</td>\n",
       "      <td>https://live.staticflickr.com/65535/5056159883...</td>\n",
       "      <td>White tailed Deer</td>\n",
       "      <td>White tailed Deer</td>\n",
       "      <td>None</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>image-3.jpg</td>\n",
       "      <td>https://live.staticflickr.com/65535/5056159743...</td>\n",
       "      <td>Columbian Black tailed Deer</td>\n",
       "      <td>test_for_cf_matrix</td>\n",
       "      <td>None</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>image-4.jpg</td>\n",
       "      <td>https://live.staticflickr.com/65535/5056146831...</td>\n",
       "      <td>Columbian Black tailed Deer</td>\n",
       "      <td>Columbian Black tailed Deer</td>\n",
       "      <td>None</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>image-5.jpg</td>\n",
       "      <td>https://live.staticflickr.com/65535/5055314058...</td>\n",
       "      <td>Little Egret</td>\n",
       "      <td>Little Egret</td>\n",
       "      <td>None</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>5</th>\n",
       "      <td>image-6.jpg</td>\n",
       "      <td>https://live.staticflickr.com/65535/5054391470...</td>\n",
       "      <td>Northern Cardinal</td>\n",
       "      <td>Northern Cardinal</td>\n",
       "      <td>None</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "         image                                          image_url  \\\n",
       "0  image-1.jpg  https://live.staticflickr.com/65535/5056792327...   \n",
       "1  image-2.jpg  https://live.staticflickr.com/65535/5056159883...   \n",
       "2  image-3.jpg  https://live.staticflickr.com/65535/5056159743...   \n",
       "3  image-4.jpg  https://live.staticflickr.com/65535/5056146831...   \n",
       "4  image-5.jpg  https://live.staticflickr.com/65535/5055314058...   \n",
       "5  image-6.jpg  https://live.staticflickr.com/65535/5054391470...   \n",
       "\n",
       "            species_prediction                 true_species native_to_ohio  \n",
       "0            Belted Kingfisher            Belted Kingfisher           None  \n",
       "1            White tailed Deer            White tailed Deer           None  \n",
       "2  Columbian Black tailed Deer           test_for_cf_matrix           None  \n",
       "3  Columbian Black tailed Deer  Columbian Black tailed Deer           None  \n",
       "4                 Little Egret                 Little Egret           None  \n",
       "5            Northern Cardinal            Northern Cardinal           None  "
      ]
     },
     "execution_count": 289,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "df #dataframe after manual filtration"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 290,
   "metadata": {},
   "outputs": [],
   "source": [
    "#save dataframe with manual filtration results and species prediction to a csv file\n",
    "compression_opts = dict(method='zip',\n",
    "                        archive_name='classifier_results.csv')  \n",
    "df.to_csv('classifier_results.zip', index=False,\n",
    "          compression=compression_opts)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Analyzing Our Results"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Here, we'll take a look at how well the species classifier predicted the species in our Flickr Image Data\n",
    "- analyze the different species we detected and their frequencies (correctly identified species) (histogram)\n",
    "- analyze the predicted class and actual classes via a confusion matrix"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Confusion Matrix"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 291,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "array([[1, 0, 0, 0, 0, 0],\n",
       "       [0, 1, 0, 0, 0, 0],\n",
       "       [0, 0, 1, 0, 0, 0],\n",
       "       [0, 0, 0, 1, 0, 0],\n",
       "       [0, 0, 0, 0, 1, 0],\n",
       "       [0, 1, 0, 0, 0, 0]])"
      ]
     },
     "execution_count": 291,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "from sklearn.metrics import confusion_matrix\n",
    "cf = confusion_matrix(df.true_species, df.species_prediction)\n",
    "cf"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 292,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "image/png": "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\n",
      "text/plain": [
       "<Figure size 432x288 with 2 Axes>"
      ]
     },
     "metadata": {
      "needs_background": "light"
     },
     "output_type": "display_data"
    }
   ],
   "source": [
    "from sklearn.metrics import ConfusionMatrixDisplay\n",
    "import matplotlib.pyplot as plt\n",
    "\n",
    "# display confusion matrix without the classifier\n",
    "disp = ConfusionMatrixDisplay(cf, display_labels = df.species_prediction)\n",
    "disp = disp.plot()\n",
    "\n",
    "plt.show()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 274,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "['GTK3Agg', 'GTK3Cairo', 'MacOSX', 'nbAgg', 'Qt4Agg', 'Qt4Cairo', 'Qt5Agg', 'Qt5Cairo', 'TkAgg', 'TkCairo', 'WebAgg', 'WX', 'WXAgg', 'WXCairo', 'agg', 'cairo', 'pdf', 'pgf', 'ps', 'svg', 'template']\n"
     ]
    },
    {
     "data": {
      "text/plain": [
       "'/Users/mramir71/anaconda3/lib/python3.7/site-packages/matplotlib/mpl-data/matplotlibrc'"
      ]
     },
     "execution_count": 274,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# Note: if confusion matrix plot does not show up, reference:\n",
    "# https://stackoverflow.com/questions/7534453/matplotlib-does-not-show-my-drawings-although-i-call-pyplot-show\n",
    "\n",
    "# To get plot to show up, you will have to find the matplotlibrc\n",
    "# file and edit the backend setting\n",
    "\n",
    "# The following code is helpful in locating where matplotlibrc\n",
    "# file is located, but you must find the file yourself and set:\n",
    "# 'backup: GtkAgg' \n",
    "import matplotlib.rcsetup as rcsetup\n",
    "print(rcsetup.all_backends)\n",
    "\n",
    "import matplotlib\n",
    "matplotlib.matplotlib_fname()"
   ]
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.7.3"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 4
}
